<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Power-Up Entry</title>
</head>
<body>

<script src="https://p.trellocdn.com/power-up.min.js"></script>
<script>
TrelloPowerUp.initialize({
  'board-buttons': function (t) {
    return [{
      text: 'My Power-Up',
      callback: async function (t, opts) {
        // cek token di member/private
        const token = await t.get('member', 'private', 'token');

        // tentukan halaman tujuan
        const target = token
          ? './home.html'
          : './authorize.html';

        return t.popup({
          title: token ? 'My Power-Up' : 'Authorize',
          url: target,
          height: 300,
          mouseEvent: opts.mouseEvent
        });
      }
    }];
  }
});
</script>

</body>
</html>
